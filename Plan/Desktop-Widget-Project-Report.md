# Desktop Widget Project Report

## **Summary**
This project involves creating an Electron-based desktop widget application called **"my-desktop-widgets"**. The app is designed to include multiple widgets, such as a main widget and a control widget. The main widget includes a logo, an input field, and customizable behavior. The control widget allows for additional functionality, such as closing the app or displaying a real-time clock.

Both widgets dynamically resize the Electron windows to match their dimensions, and the windows themselves can be dragged freely across multiple displays. This allows the widgets to remain interactive with the desktop environment while maintaining a clean and minimalistic design.

This report provides a detailed overview of the work completed, including:
- Installed dependencies.
- Folder and file structure.
- Implementation details for core features, including drag-and-drop functionality for the widgets, resizing, and interactive controls.

---

## **Dependencies Installed**
- **Electron**: The framework used to build the desktop app.
  - Installed via:
    ```bash
    npm install electron --save-dev
    ```

---

## **Folder and File Structure**
Here is the current project structure:
```
my-desktop-widgets/
├── main.js                # Entry point for the Electron application
├── package.json           # Project configuration and dependencies
├── node_modules/          # Node.js dependencies (auto-generated by npm)
├── src/                   # Frontend files for the widgets
│   ├── control.html       # Control widget HTML file
│   ├── control.js         # JavaScript for control widget behavior
│   ├── control.css        # CSS for control widget styling
│   ├── index.html         # Main widget HTML file
│   ├── style.css          # CSS file for styling
│   ├── app.js             # JavaScript file for interactive behavior
│   ├── mentor-logo.png    # Logo image for the main widget
```

---

## **Step-by-Step Details**

### **Step 1: Project Initialization**
1. Created the project folder: `my-desktop-widgets`.
2. Initialized the project using:
    ```bash
    npm init -y
    ```
3. Installed Electron as a development dependency:
    ```bash
    npm install electron --save-dev
    ```

---

### **Step 2: Electron Configuration**
- Created a `main.js` file in the root folder to serve as the entry point for the Electron app.
- Added configuration to handle both the **main widget** and the **control widget**.

#### **Updated `main.js`**
```javascript name=main.js
const { app, BrowserWindow, ipcMain } = require("electron");
const path = require("path");

let mainWindow, controlWindow;

app.on("ready", () => {
  // Main Widget
  mainWindow = new BrowserWindow({
    width: 300,
    height: 400,
    frame: false,
    transparent: true,
    alwaysOnTop: true,
    resizable: false,
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: false,
    },
  });
  mainWindow.loadFile(path.join(__dirname, "src", "index.html"));

  // Control Widget
  controlWindow = new BrowserWindow({
    width: 200,
    height: 100,
    frame: false,
    transparent: true,
    alwaysOnTop: true,
    resizable: false,
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: false,
    },
  });

  controlWindow.loadFile(path.join(__dirname, "src", "control.html"));

  // Handle requests to move windows
  ipcMain.on("move-window", (event, { deltaX, deltaY }) => {
    const focusedWindow = BrowserWindow.getFocusedWindow();
    if (focusedWindow) {
      const bounds = focusedWindow.getBounds();
      focusedWindow.setBounds({
        x: bounds.x + deltaX,
        y: bounds.y + deltaY,
        width: bounds.width,
        height: bounds.height,
      });
    }
  });

  // Handle requests to close the app
  ipcMain.on("close-app", () => {
    if (mainWindow) mainWindow.close();
    if (controlWindow) controlWindow.close();
    app.quit();
  });
});
```

---

### **Step 3: Frontend Development**

#### **3.1 Control Widget (`control.html`)**
- Added a control widget to manage the app, allowing users to close the app or view a real-time clock.

```html name=src/control.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Control Widget</title>
  <link rel="stylesheet" href="control.css">
</head>
<body>
  <div id="control-widget" class="widget">
    <div id="control-drag-handle">Control</div>
    <div id="current-time">00:00:00</div>
    <button id="close-button">X</button>
  </div>
  <script src="control.js"></script>
</body>
</html>
```

---

#### **3.2 Control Widget JavaScript (`control.js`)**
- Implemented dragging for the control widget, a real-time clock, and a close button.

```javascript name=src/control.js
const { ipcRenderer } = require("electron");

document.addEventListener("DOMContentLoaded", () => {
  // Handle Dragging
  const controlDragHandle = document.getElementById("control-drag-handle");

  let isDraggingControl = false;
  let startXControl, startYControl;

  controlDragHandle.addEventListener("mousedown", (e) => {
    isDraggingControl = true;
    startXControl = e.screenX;
    startYControl = e.screenY;
    document.body.style.userSelect = "none";
  });

  document.addEventListener("mousemove", (e) => {
    if (!isDraggingControl) return;
    const deltaX = e.screenX - startXControl;
    const deltaY = e.screenY - startYControl;
    ipcRenderer.send("move-window", { deltaX, deltaY });
    startXControl = e.screenX;
    startYControl = e.screenY;
  });

  document.addEventListener("mouseup", () => {
    isDraggingControl = false;
    document.body.style.userSelect = "";
  });

  // Real-Time Clock
  const currentTimeElement = document.getElementById("current-time");
  setInterval(() => {
    const now = new Date();
    const timeString = now.toLocaleTimeString();
    currentTimeElement.textContent = timeString;
  }, 1000);

  // Close Button
  const closeButton = document.getElementById("close-button");
  closeButton.addEventListener("click", () => {
    ipcRenderer.send("close-app");
  });
});
```

---

#### **3.3 Control Widget CSS (`control.css`)**
```css name=src/control.css
body {
  margin: 0;
  padding: 0;
  background: transparent;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

.widget {
  width: 200px;
  height: 100px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

#control-drag-handle {
  background-color: #444;
  color: white;
  text-align: center;
  padding: 5px;
  cursor: move;
  border-radius: 10px 10px 0 0;
}

#current-time {
  text-align: center;
  margin: 5px;
}

#close-button {
  position: absolute;
  top: 5px;
  right: 5px;
  background-color: red;
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  width: 20px;
  height: 20px;
  text-align: center;
  line-height: 20px;
}
```

---

### **Next Steps**
1. Add AI logic to process user input in the main widget.
2. Package the app into a standalone executable for distribution.
3. Add additional widgets (e.g., weather, clock, or news).