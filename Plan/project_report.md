# Desktop Widget Project Report

## **Summary**
This project involves creating an Electron-based desktop widget application called **"my-desktop-widgets"**. The app is designed to be a draggable desktop widget that includes a logo, an input field, and customizable behavior. The widget dynamically resizes the Electron window to match its dimensions, and the window itself can be dragged freely across multiple displays. This allows the widget to remain interactive with the desktop environment while maintaining a clean and minimalistic design.

This report provides a detailed overview of the work completed, including:
- Installed dependencies.
- Folder and file structure.
- Implementation details for core features, including drag-and-drop functionality for the widget and resizing the workspace to fit the widget.

---

## **Dependencies Installed**
- **Electron**: The framework used to build the desktop app.
  - Installed via:
    ```bash
    npm install electron --save-dev
    ```

---

## **Folder and File Structure**
Here is the current project structure:
```
my-desktop-widgets/
├── main.js                # Entry point for the Electron application
├── package.json           # Project configuration and dependencies
├── node_modules/          # Node.js dependencies (auto-generated by npm)
├── src/                   # Frontend files for the widget
│   ├── index.html         # Main HTML file
│   ├── style.css          # CSS file for styling
│   ├── app.js             # JavaScript file for interactive behavior
│   ├── mentor-logo.png    # Logo image for the widget
```

---

## **Step-by-Step Details**

### **Step 1: Project Initialization**
1. Created the project folder: `my-desktop-widgets`.
2. Initialized the project using:
    ```bash
    npm init -y
    ```
3. Installed Electron as a development dependency:
    ```bash
    npm install electron --save-dev
    ```

---

### **Step 2: Electron Configuration**
- Created a `main.js` file in the root folder to serve as the entry point for the Electron app.
- Modified the Electron window configuration to dynamically match the widget size and support free movement across displays. The workspace now moves together with the widget when dragged.

#### **Updated `main.js`**
```javascript name=main.js
const { app, BrowserWindow, ipcMain } = require("electron");
const path = require("path");

let mainWindow;

app.on("ready", () => {
  // Create the main window
  mainWindow = new BrowserWindow({
    width: 300, // Match widget width
    height: 400, // Match widget height
    frame: false, // Frameless window
    transparent: true, // Transparent background
    alwaysOnTop: true, // Keep the widget on top
    resizable: false, // Prevent resizing
    webPreferences: {
      nodeIntegration: true, // Allow Node.js in the app
      contextIsolation: false, // Allow IPC communication
    },
  });

  // Load the HTML file
  mainWindow.loadFile(path.join(__dirname, "src", "index.html"));

  // Handle requests to move the window
  ipcMain.on("move-window", (event, { deltaX, deltaY }) => {
    const bounds = mainWindow.getBounds();
    mainWindow.setBounds({
      x: bounds.x + deltaX,
      y: bounds.y + deltaY,
      width: bounds.width,
      height: bounds.height,
    });
  });
});

app.on("window-all-closed", () => {
  if (process.platform !== "darwin") {
    app.quit();
  }
});
```

---

### **Step 3: Frontend Development**

#### **3.1 HTML File (`index.html`)**
- The widget itself now acts as the entire window's content. Removed the `#widget-container` and simplified the structure to focus solely on the widget.

```html name=src/index.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Mentor Widget</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="ai-mentor" class="widget">
    <div id="drag-handle">Drag Me</div>
    <img src="mentor-logo.png" alt="AI Mentor" id="mentor-logo">
    <input type="text" id="mentor-input" placeholder="Ask your Mentor...">
    <button id="mentor-submit">Submit</button>
  </div>
  <script src="app.js"></script>
</body>
</html>
```

---

#### **3.2 CSS File (`style.css`)**
- Styled the widget to match the window size and added a draggable handle. Removed unnecessary container styling.

```css name=src/style.css
body {
  margin: 0;
  padding: 0;
  background: transparent;
  overflow: hidden;
  font-family: Arial, sans-serif;
}

.widget {
  width: 300px;
  height: 400px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  overflow: hidden;
}

#drag-handle {
  background-color: #444;
  color: white;
  text-align: center;
  padding: 5px;
  cursor: move;
  border-radius: 10px 10px 0 0;
}

#mentor-logo {
  width: 100px;
  height: 100px;
  display: block;
  margin: 10px auto;
}

#mentor-input {
  width: calc(100% - 20px);
  margin: 10px;
  padding: 5px;
  border: 1px solid #ddd;
  border-radius: 5px;
}

#mentor-submit {
  width: calc(100% - 20px);
  margin: 10px;
  padding: 5px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

#mentor-submit:hover {
  background-color: #45a049;
}
```

---

#### **3.3 JavaScript File (`app.js`)**
- Implemented drag-and-drop functionality to move the entire Electron window when dragging the widget.

```javascript name=src/app.js
const { ipcRenderer } = require("electron");

document.addEventListener("DOMContentLoaded", () => {
  const dragHandle = document.getElementById("drag-handle");

  let isDragging = false;
  let startX, startY;

  // Start dragging
  dragHandle.addEventListener("mousedown", (e) => {
    isDragging = true;
    startX = e.screenX;
    startY = e.screenY;

    // Prevent text selection while dragging
    document.body.style.userSelect = "none";
  });

  // Dragging
  document.addEventListener("mousemove", (e) => {
    if (!isDragging) return;

    const deltaX = e.screenX - startX;
    const deltaY = e.screenY - startY;

    // Send the movement deltas to the main process
    ipcRenderer.send("move-window", { deltaX, deltaY });

    // Update start positions for the next movement
    startX = e.screenX;
    startY = e.screenY;
  });

  // Stop dragging
  document.addEventListener("mouseup", () => {
    isDragging = false;
    document.body.style.userSelect = ""; // Re-enable text selection
  });
});
```

---

### **4. Added Logo**
- Added a `mentor-logo.png` file to the `src/` folder as the visual logo for the widget.

---

### **Key Features**
1. **Dynamic Window Resizing**:
   - The Electron window matches the size of the widget (`300x400px`).

2. **Movable Workspace**:
   - The entire workspace moves with the widget when dragged, allowing it to be placed anywhere, even across multiple displays.

3. **Interactive Desktop Environment**:
   - The widget remains frameless and transparent, allowing interactions with other desktop elements around it.

---

### **Next Steps**
1. Add AI logic to process user input (e.g., connect to an API or add predefined responses).
2. Package the app into a standalone executable for distribution.
3. Add additional widgets (e.g., weather, clock, or news).
